<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="장일준, 이태현, 정은서, 정아영">

<title>은서 만두만두 - project1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>



<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>



<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">은서 만두만두</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./project1.html" aria-current="page"> 
<span class="menu-text">project1</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#소상공인시장진흥공단_전국-전통시장-현황_2015" id="toc-소상공인시장진흥공단_전국-전통시장-현황_2015" class="nav-link active" data-scroll-target="#소상공인시장진흥공단_전국-전통시장-현황_2015">소상공인시장진흥공단_전국 전통시장 현황_2015</a>
  <ul class="collapse">
  <li><a href="#변수명-바꾸기" id="toc-변수명-바꾸기" class="nav-link" data-scroll-target="#변수명-바꾸기">변수명 바꾸기</a></li>
  <li><a href="#데이터-정보-알아보기" id="toc-데이터-정보-알아보기" class="nav-link" data-scroll-target="#데이터-정보-알아보기">데이터 정보 알아보기</a></li>
  <li><a href="#점포수-요약-정보-알아보기" id="toc-점포수-요약-정보-알아보기" class="nav-link" data-scroll-target="#점포수-요약-정보-알아보기">점포수 요약 정보 알아보기</a></li>
  <li><a href="#점포수로-범주화하기" id="toc-점포수로-범주화하기" class="nav-link" data-scroll-target="#점포수로-범주화하기">점포수로 범주화하기</a></li>
  <li><a href="#편의시절공중화장실-주차장-보유-여부에-따라-시장을-범주화하기." id="toc-편의시절공중화장실-주차장-보유-여부에-따라-시장을-범주화하기." class="nav-link" data-scroll-target="#편의시절공중화장실-주차장-보유-여부에-따라-시장을-범주화하기.">편의시절(공중화장실, 주차장) 보유 여부에 따라 시장을 범주화하기.</a></li>
  <li><a href="#상설정기-시장의-지역-봐보기" id="toc-상설정기-시장의-지역-봐보기" class="nav-link" data-scroll-target="#상설정기-시장의-지역-봐보기">상설+정기 시장의 지역 봐보기</a></li>
  <li><a href="#시도-변수-만들기" id="toc-시도-변수-만들기" class="nav-link" data-scroll-target="#시도-변수-만들기">시/도 변수 만들기</a></li>
  <li><a href="#지역별로-시장-수-알아보기" id="toc-지역별로-시장-수-알아보기" class="nav-link" data-scroll-target="#지역별로-시장-수-알아보기">지역별로 시장 수 알아보기</a></li>
  <li><a href="#관광형-상설정기-시장이-있는-지역-알아보기" id="toc-관광형-상설정기-시장이-있는-지역-알아보기" class="nav-link" data-scroll-target="#관광형-상설정기-시장이-있는-지역-알아보기">관광형 상설+정기 시장이 있는 지역 알아보기</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">project1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>장일준, 이태현, 정은서, 정아영 </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="소상공인시장진흥공단_전국-전통시장-현황_2015" class="level1">
<h1>소상공인시장진흥공단_전국 전통시장 현황_2015</h1>
<p>예전에는 전통시장을 가면 편의시설이 부족해서 접근성이 떨어졌는데, 요즘에는 편의시설을 개선하려는 노력을 기울이고 있다. 1. 와이파이 설치 2. 건강한 식재료 (백년초 국수 등 + 지역 특색) 3. 공산품이 아니라 정성이 들어간 음식들 4. 저렴한 가격 + 온누리 상품권 사용가능 5. 쇼핑 후 차 한 잔의 여유를 위한 여가 공간 구비 (카페 등) 6. 1인 가구를 위한 음식</p>
<p>상품권 가맹점포 정보 https://www.sbiz.or.kr/sijangtong/nation/onnuri/onnuriMktList.do?menu_type_a=A&amp;menu_cms=&amp;menu_id=070400#shopPopBtn</p>
<div id="ced8d677" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>market <span class="op">=</span> pd.read_excel(<span class="st">"traditionalmarket.xlsx"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>market2 <span class="op">=</span> market.copy()</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>market2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">시장명</th>
<th data-quarto-table-cell-role="th">시장유형</th>
<th data-quarto-table-cell-role="th">소재지도로명주소</th>
<th data-quarto-table-cell-role="th">시장개설주기</th>
<th data-quarto-table-cell-role="th">소재지지번주소</th>
<th data-quarto-table-cell-role="th">점포수</th>
<th data-quarto-table-cell-role="th">사용가능상품권</th>
<th data-quarto-table-cell-role="th">공중화장실 보유여부</th>
<th data-quarto-table-cell-role="th">주차장 보유여부</th>
<th data-quarto-table-cell-role="th">개설년도</th>
<th data-quarto-table-cell-role="th">데이터기준일자</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>중앙시장</td>
<td>상설</td>
<td>강원도 강릉시 금성로 21</td>
<td>상설</td>
<td>강원 강릉시 성남동 50번지</td>
<td>229</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1980.0</td>
<td>2015-12-31</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>강릉동부시장</td>
<td>상설</td>
<td>강원도 강릉시 옥천로 48</td>
<td>상설</td>
<td>강원 강릉시 옥천동 223번지</td>
<td>91</td>
<td>NaN</td>
<td>Y</td>
<td>N</td>
<td>2014.0</td>
<td>2015-12-31</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>강릉서부시장</td>
<td>상설</td>
<td>강원도 강릉시 임영로 155번길 6</td>
<td>상설</td>
<td>강원 강릉시 용강동 29번지</td>
<td>109</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1977.0</td>
<td>2015-12-31</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>주문진종합시장</td>
<td>상설+정기</td>
<td>강원도 강릉시 주문진읍 구 시장길</td>
<td>5일</td>
<td>강원 강릉시 주문진읍 주문리 321-52번지</td>
<td>77</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2006.0</td>
<td>2015-12-31</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>주문진수산시장</td>
<td>상설</td>
<td>강원도 강릉시 주문진읍 시장1길 4-1</td>
<td>상설</td>
<td>강원 강릉시 주문진읍 주문리 312-91번지</td>
<td>42</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2007.0</td>
<td>2015-12-31</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>현행 시장법상 시장은 상설시장과 정기시장으로 구분된다.</p>
<p><img src="상설시장 이미지.jpg" class="img-fluid" alt="상설 시장"> 상설 시장 : 시장 개설 요건을 갖추고, 일정한 구역내에서 상시로 거래하는 영업장. <img src="정기시장 이미지.jpg" class="img-fluid" alt="정기 시장"></p>
<p>정기 시장 : 일정한 지역안에서 정기 또는 계절적으로 개설되는 시장. <img src="상설 시장 + 5일장 이미지.jpg" class="img-fluid" alt="상설 시장과 5일장이 공존하는 시장"> 상설 시장과 5일장이 공존하는 시장 : 관광형 시장으로 탈바꿈한 시장. 5일 장날이 되면 주민, 관광객 등으로 인상한해를 이룬다.</p>
<p>데이터상 ’시장유형’에 정기시장이 존재하면 ’시장개설주기’가 5일장이라고 하는지 알아보고자 함.</p>
<p>https://wowmap.kr/market5 : 5일장 지도 (위치)</p>
<section id="변수명-바꾸기" class="level2">
<h2 class="anchored" data-anchor-id="변수명-바꾸기">변수명 바꾸기</h2>
<div id="b6de9811" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>market2 <span class="op">=</span> market2.rename(columns<span class="op">=</span>{<span class="st">'시장명'</span> : <span class="st">'market_name'</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'시장유형'</span> : <span class="st">'type'</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'소재지도로명주소'</span> : <span class="st">'address_new'</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'시장개설주기'</span> : <span class="st">'open_period'</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'소재지지번주소'</span> : <span class="st">'address_old'</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'점포수'</span> : <span class="st">'market_count'</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'사용가능상품권'</span> : <span class="st">'certificate'</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'공중화장실 보유여부'</span> : <span class="st">'public_toilet'</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'주차장 보유여부'</span> : <span class="st">'parking_lot'</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'개설년도'</span> : <span class="st">'year'</span> ,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                              <span class="st">'데이터기준일자'</span> : <span class="st">'data_date'</span>})</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>market2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">market_name</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">address_new</th>
<th data-quarto-table-cell-role="th">open_period</th>
<th data-quarto-table-cell-role="th">address_old</th>
<th data-quarto-table-cell-role="th">market_count</th>
<th data-quarto-table-cell-role="th">certificate</th>
<th data-quarto-table-cell-role="th">public_toilet</th>
<th data-quarto-table-cell-role="th">parking_lot</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">data_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>중앙시장</td>
<td>상설</td>
<td>강원도 강릉시 금성로 21</td>
<td>상설</td>
<td>강원 강릉시 성남동 50번지</td>
<td>229</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1980.0</td>
<td>2015-12-31</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>강릉동부시장</td>
<td>상설</td>
<td>강원도 강릉시 옥천로 48</td>
<td>상설</td>
<td>강원 강릉시 옥천동 223번지</td>
<td>91</td>
<td>NaN</td>
<td>Y</td>
<td>N</td>
<td>2014.0</td>
<td>2015-12-31</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>강릉서부시장</td>
<td>상설</td>
<td>강원도 강릉시 임영로 155번길 6</td>
<td>상설</td>
<td>강원 강릉시 용강동 29번지</td>
<td>109</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1977.0</td>
<td>2015-12-31</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>주문진종합시장</td>
<td>상설+정기</td>
<td>강원도 강릉시 주문진읍 구 시장길</td>
<td>5일</td>
<td>강원 강릉시 주문진읍 주문리 321-52번지</td>
<td>77</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2006.0</td>
<td>2015-12-31</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>주문진수산시장</td>
<td>상설</td>
<td>강원도 강릉시 주문진읍 시장1길 4-1</td>
<td>상설</td>
<td>강원 강릉시 주문진읍 주문리 312-91번지</td>
<td>42</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2007.0</td>
<td>2015-12-31</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>잘 바뀐 것을 알 수 있다.</p>
</section>
<section id="데이터-정보-알아보기" class="level2">
<h2 class="anchored" data-anchor-id="데이터-정보-알아보기">데이터 정보 알아보기</h2>
<div id="ac04edbb" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>market2.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1439 entries, 0 to 1438
Data columns (total 11 columns):
 #   Column         Non-Null Count  Dtype         
---  ------         --------------  -----         
 0   market_name    1439 non-null   object        
 1   type           1439 non-null   object        
 2   address_new    1439 non-null   object        
 3   open_period    1439 non-null   object        
 4   address_old    1439 non-null   object        
 5   market_count   1439 non-null   int64         
 6   certificate    1159 non-null   object        
 7   public_toilet  1439 non-null   object        
 8   parking_lot    1439 non-null   object        
 9   year           1281 non-null   float64       
 10  data_date      1439 non-null   datetime64[ns]
dtypes: datetime64[ns](1), float64(1), int64(1), object(8)
memory usage: 123.8+ KB</code></pre>
</div>
</div>
<p>8개가 범주컬럼이고, 2개가 수치 컬럼, 1개가 날짜컬럼임을 알 수 있다. (수치컬럼중 1개는 연도컬럼이라서, 우리가 분석해 볼 수 있는 수치 컬럼은 1개뿐이다.) 그리고 사용가능상품권(certificate)와 개설연도(year)에만 null값이 있다는 것을 알 수 있다.</p>
<p>각 컬럼의 범주 알아보기</p>
<div id="ae06c419" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'market_name'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>market_name
중앙시장              16
동부시장               6
역전시장               5
현대시장               4
신흥시장               4
                  ..
서문시장               1
육거리종합시장            1
원마루시장              1
청주두꺼비시장(구수곡시장)     1
주문진건어물시장           1
Name: count, Length: 1367, dtype: int64</code></pre>
</div>
</div>
<p>이름이 동일한 서로 다른 시장이 존재함.</p>
<div id="11b546f9" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'type'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>type
상설       1002
상설+정기     259
정기        178
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>시장 유형은 3가지임.</p>
<div id="d542151e" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'address_new'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>address_new
경상북도 포항시 북구 죽도시장길 4-7        2
대구광역시 북구 칠성시장로 5길 22         2
경상북도 예천군 예천읍 시장로 109         2
대구광역시 남구 대명동 1157-10         2
서울특별시 강북구 수유동 54-5           2
                            ..
충청북도 청주시 서원구 사직대로 265번길 7    1
충청북도 청주시 서원구 사칭동 2862-2      1
충청북도 청주시 서원구 수곡로 58번길 7-2    1
충청북도 청주시 청원구 공항로 58번길 14     1
강원도 강릉시 주문진읍 구 시장길           1
Name: count, Length: 1430, dtype: int64</code></pre>
</div>
</div>
<div id="725b6ade" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'address_old'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>address_old
경기 김포시 양촌읍 414-3             2
대구 수성구 수성동2가 39-4            2
경기 성남시 은행동 1553              2
대구 중구 대신동 115-379            2
서울 강북구 수유동 54-5              2
                            ..
충북 청주시 사직동 265-19            1
충북 청주시 사창동 286-22            1
충북 청주시 수곡동 862               1
충북 청주시 내덕동 398-4             1
강원 강릉시 주문진읍 주문리 321-52번지     1
Name: count, Length: 1430, dtype: int64</code></pre>
</div>
</div>
<p>주소가 동일한 시장이 있음</p>
<div id="6466f0c3" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'open_period'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>open_period
상설    1002
5일     435
2일       1
6일       1
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>정기 시장에 5일, 2일, 6일 있음.</p>
<div id="3772d7bd" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'certificate'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>certificate
온누리상품권    1159
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="12dfbf2a" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'public_toilet'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>public_toilet
Y    1308
N     131
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="2a9698dd" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'parking_lot'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>parking_lot
Y    859
N    580
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="ca8f4633" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'year'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>year
2005.0    130
2006.0    104
2013.0     85
2009.0     80
2007.0     78
         ... 
1954.0      1
1928.0      1
1926.0      1
1918.0      1
1920.0      1
Name: count, Length: 73, dtype: int64</code></pre>
</div>
</div>
<div id="2dca8e81" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>year_group_count <span class="op">=</span> market2.groupby(<span class="st">'year'</span>).agg(year_count<span class="op">=</span> (<span class="st">'year'</span>, <span class="st">'count'</span>))</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>plt.clf()</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>year_group_count, x<span class="op">=</span><span class="st">'year'</span>, y<span class="op">=</span><span class="st">'year_count'</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="project1_files/figure-html/cell-14-output-1.png" width="609" height="429" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="6e8d54bf" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'data_date'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>data_date
2015-12-31    1439
Name: count, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="점포수-요약-정보-알아보기" class="level2">
<h2 class="anchored" data-anchor-id="점포수-요약-정보-알아보기">점포수 요약 정보 알아보기</h2>
<div id="b8952658" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>market2[[<span class="st">'market_count'</span>]].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">market_count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>1439.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>143.907575</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>298.989963</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>50.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>80.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>134.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>5852.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>점포수 위주로 봤을 때, 25%, 75% 기준으로 점포 사이즈를 나누는 것이 합리적으로 보인다. samll : 50개 미만 medium : 50개 이상 134개 미만 large : 134개 이상 3가지의 범주로 나누고자 한다.</p>
</section>
<section id="점포수로-범주화하기" class="level2">
<h2 class="anchored" data-anchor-id="점포수로-범주화하기">점포수로 범주화하기</h2>
<div id="6bc0a49f" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>market2 <span class="op">=</span> market2.assign(market_scale <span class="op">=</span> np.where(market2[<span class="st">"market_count"</span>] <span class="op">&gt;=</span> <span class="dv">134</span>, <span class="st">"large"</span>, </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>                                        np.where(market2[<span class="st">"market_count"</span>] <span class="op">&gt;=</span> <span class="dv">50</span>, <span class="st">"medium"</span>, <span class="st">"small"</span>)))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>market2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">market_name</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">address_new</th>
<th data-quarto-table-cell-role="th">open_period</th>
<th data-quarto-table-cell-role="th">address_old</th>
<th data-quarto-table-cell-role="th">market_count</th>
<th data-quarto-table-cell-role="th">certificate</th>
<th data-quarto-table-cell-role="th">public_toilet</th>
<th data-quarto-table-cell-role="th">parking_lot</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">data_date</th>
<th data-quarto-table-cell-role="th">market_scale</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>중앙시장</td>
<td>상설</td>
<td>강원도 강릉시 금성로 21</td>
<td>상설</td>
<td>강원 강릉시 성남동 50번지</td>
<td>229</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1980.0</td>
<td>2015-12-31</td>
<td>large</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>강릉동부시장</td>
<td>상설</td>
<td>강원도 강릉시 옥천로 48</td>
<td>상설</td>
<td>강원 강릉시 옥천동 223번지</td>
<td>91</td>
<td>NaN</td>
<td>Y</td>
<td>N</td>
<td>2014.0</td>
<td>2015-12-31</td>
<td>medium</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>강릉서부시장</td>
<td>상설</td>
<td>강원도 강릉시 임영로 155번길 6</td>
<td>상설</td>
<td>강원 강릉시 용강동 29번지</td>
<td>109</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1977.0</td>
<td>2015-12-31</td>
<td>medium</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>주문진종합시장</td>
<td>상설+정기</td>
<td>강원도 강릉시 주문진읍 구 시장길</td>
<td>5일</td>
<td>강원 강릉시 주문진읍 주문리 321-52번지</td>
<td>77</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2006.0</td>
<td>2015-12-31</td>
<td>medium</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>주문진수산시장</td>
<td>상설</td>
<td>강원도 강릉시 주문진읍 시장1길 4-1</td>
<td>상설</td>
<td>강원 강릉시 주문진읍 주문리 312-91번지</td>
<td>42</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2007.0</td>
<td>2015-12-31</td>
<td>small</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>점포수대로 범주화가 잘 되어진 것으로 보인다.</p>
<div id="6359f911" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>plt.clf()</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'market_scale'</span>].value_counts().plot.bar(rot<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="project1_files/figure-html/cell-18-output-1.png" width="575" height="429" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="편의시절공중화장실-주차장-보유-여부에-따라-시장을-범주화하기." class="level2">
<h2 class="anchored" data-anchor-id="편의시절공중화장실-주차장-보유-여부에-따라-시장을-범주화하기.">편의시절(공중화장실, 주차장) 보유 여부에 따라 시장을 범주화하기.</h2>
<div id="cc8a4e10" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'level'</span>] <span class="op">=</span> np.where((market2[<span class="st">'public_toilet'</span>] <span class="op">==</span> <span class="st">'Y'</span>) <span class="op">&amp;</span> (market2[<span class="st">'parking_lot'</span>] <span class="op">==</span> <span class="st">'Y'</span>), <span class="st">'high'</span>, </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>                   np.where((market2[<span class="st">'public_toilet'</span>] <span class="op">==</span> <span class="st">'N'</span>) <span class="op">&amp;</span> (market2[<span class="st">'public_toilet'</span>] <span class="op">==</span> <span class="st">'N'</span>) , <span class="st">'low'</span>, <span class="st">'intermediate'</span>))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>market2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">market_name</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">address_new</th>
<th data-quarto-table-cell-role="th">open_period</th>
<th data-quarto-table-cell-role="th">address_old</th>
<th data-quarto-table-cell-role="th">market_count</th>
<th data-quarto-table-cell-role="th">certificate</th>
<th data-quarto-table-cell-role="th">public_toilet</th>
<th data-quarto-table-cell-role="th">parking_lot</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">data_date</th>
<th data-quarto-table-cell-role="th">market_scale</th>
<th data-quarto-table-cell-role="th">level</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>중앙시장</td>
<td>상설</td>
<td>강원도 강릉시 금성로 21</td>
<td>상설</td>
<td>강원 강릉시 성남동 50번지</td>
<td>229</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1980.0</td>
<td>2015-12-31</td>
<td>large</td>
<td>high</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>강릉동부시장</td>
<td>상설</td>
<td>강원도 강릉시 옥천로 48</td>
<td>상설</td>
<td>강원 강릉시 옥천동 223번지</td>
<td>91</td>
<td>NaN</td>
<td>Y</td>
<td>N</td>
<td>2014.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>intermediate</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>강릉서부시장</td>
<td>상설</td>
<td>강원도 강릉시 임영로 155번길 6</td>
<td>상설</td>
<td>강원 강릉시 용강동 29번지</td>
<td>109</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1977.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>high</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>주문진종합시장</td>
<td>상설+정기</td>
<td>강원도 강릉시 주문진읍 구 시장길</td>
<td>5일</td>
<td>강원 강릉시 주문진읍 주문리 321-52번지</td>
<td>77</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2006.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>high</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>주문진수산시장</td>
<td>상설</td>
<td>강원도 강릉시 주문진읍 시장1길 4-1</td>
<td>상설</td>
<td>강원 강릉시 주문진읍 주문리 312-91번지</td>
<td>42</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2007.0</td>
<td>2015-12-31</td>
<td>small</td>
<td>high</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>편의시절(공중화장실, 주차장) 보유 여부에 따라 시장의 편의성이 얼마나 좋은지 범주화 해보고자 한다.</p>
<p>(공중화장실 Y, 주차장 Y) -&gt; high (공중화장실 Y, 주차장 N) -&gt; intermediate (공중화장실 N, 주차장 Y) -&gt; intermediate (공중화장실 N, 주차장 N) -&gt; low</p>
<div id="9675f882" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>plt.clf()</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'level'</span>].value_counts().plot.bar(rot<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="project1_files/figure-html/cell-20-output-1.png" width="575" height="429" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>대다수의 시장이 편의시설이 잘 구비되어 있음을 알 수 있다.</p>
<p>Y의 현황을 파악하기 위해서, N은 null값으로 만들기 -&gt; market3 데이터프레임으로 함. N 갯수 알아보기</p>
<div id="8d20c28f" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'public_toilet'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>public_toilet
Y    1308
N     131
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="2fb58516" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'parking_lot'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>parking_lot
Y    859
N    580
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>온누리 상품권은 사용안하는 곳은 null값이니까 그대로 count 쓰면 쓰는 곳만 세어짐 공중화장실, 주차장은 Y/N 이므로, Y만 세려면 Y만 세어줘야 함.</p>
<div id="d2053090" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>market3 <span class="op">=</span> market2.copy()</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>market3.loc[market3[<span class="st">'public_toilet'</span>]<span class="op">==</span><span class="st">'N'</span>, <span class="st">'public_toilet'</span>] <span class="op">=</span> np.nan</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>market3[<span class="st">'public_toilet'</span>].isna().<span class="bu">sum</span>()</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>market3.loc[market3[<span class="st">'parking_lot'</span>]<span class="op">==</span><span class="st">'N'</span>, <span class="st">'parking_lot'</span>] <span class="op">=</span> np.nan</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>market3[<span class="st">'parking_lot'</span>].isna().<span class="bu">sum</span>()</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'display.max_columns'</span>, <span class="va">None</span>)</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>group_df <span class="op">=</span> market3.groupby([<span class="st">'type'</span>,<span class="st">'market_scale'</span>]).agg(market_count<span class="op">=</span> (<span class="st">'market_name'</span>,<span class="st">'count'</span>)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>                                                       , certificate_count <span class="op">=</span> (<span class="st">'certificate'</span>, <span class="st">'count'</span>)</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>                                                       , public_toilet_count <span class="op">=</span> (<span class="st">'public_toilet'</span>, <span class="st">'count'</span>)</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>                                                       , parking_lot_count <span class="op">=</span> (<span class="st">'parking_lot'</span>, <span class="st">'count'</span>))</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>group_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">market_count</th>
<th data-quarto-table-cell-role="th">certificate_count</th>
<th data-quarto-table-cell-role="th">public_toilet_count</th>
<th data-quarto-table-cell-role="th">parking_lot_count</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">market_scale</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">상설</td>
<td data-quarto-table-cell-role="th">large</td>
<td>281</td>
<td>256</td>
<td>259</td>
<td>182</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">medium</td>
<td>532</td>
<td>459</td>
<td>444</td>
<td>247</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">small</td>
<td>189</td>
<td>127</td>
<td>180</td>
<td>103</td>
</tr>
<tr class="even">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">상설+정기</td>
<td data-quarto-table-cell-role="th">large</td>
<td>66</td>
<td>64</td>
<td>63</td>
<td>53</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">medium</td>
<td>145</td>
<td>132</td>
<td>138</td>
<td>101</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">small</td>
<td>48</td>
<td>33</td>
<td>48</td>
<td>40</td>
</tr>
<tr class="odd">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">정기</td>
<td data-quarto-table-cell-role="th">large</td>
<td>15</td>
<td>14</td>
<td>15</td>
<td>13</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">medium</td>
<td>46</td>
<td>32</td>
<td>46</td>
<td>36</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">small</td>
<td>117</td>
<td>42</td>
<td>115</td>
<td>84</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>5일장 중에서 점포수가 많은 시장은 15곳 밖에 안 됨. 대부분 small에 해당함. 따라서 5일장만 열리는 곳은 소규모로 진행되는 시장임. 즉 외부 관광객이 간다기 보다는 지역 현지인들이 이용할 것으로 보임. 라고 생각을 했지, 5일장 블로그 봐보니까 관광지라면 관광객도 갈 법한 점포들도 있었음.</p>
<div id="a76cd346" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>group_df <span class="op">=</span> market3.groupby([<span class="st">'type'</span>,<span class="st">'market_scale'</span>,<span class="st">'level'</span>]).agg(market_count<span class="op">=</span> (<span class="st">'market_name'</span>,<span class="st">'count'</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>                                                       , certificate_count <span class="op">=</span> (<span class="st">'certificate'</span>, <span class="st">'count'</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                                                       , public_toilet_count <span class="op">=</span> (<span class="st">'public_toilet'</span>, <span class="st">'count'</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                                                       , parking_lot_count <span class="op">=</span> (<span class="st">'parking_lot'</span>, <span class="st">'count'</span>))</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>group_df[<span class="st">'certificate_pct'</span>]<span class="op">=</span> <span class="bu">round</span>(group_df[<span class="st">'certificate_count'</span>]<span class="op">/</span>group_df[<span class="st">'market_count'</span>]<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>group_df[<span class="st">'public_toilet_pct'</span>]<span class="op">=</span><span class="bu">round</span>(group_df[<span class="st">'public_toilet_count'</span>]<span class="op">/</span>group_df[<span class="st">'market_count'</span>]<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>group_df[<span class="st">'parking_lot_pct'</span>]<span class="op">=</span><span class="bu">round</span>(group_df[<span class="st">'parking_lot_count'</span>]<span class="op">/</span>group_df[<span class="st">'market_count'</span>]<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>group_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">market_count</th>
<th data-quarto-table-cell-role="th">certificate_count</th>
<th data-quarto-table-cell-role="th">public_toilet_count</th>
<th data-quarto-table-cell-role="th">parking_lot_count</th>
<th data-quarto-table-cell-role="th">certificate_pct</th>
<th data-quarto-table-cell-role="th">public_toilet_pct</th>
<th data-quarto-table-cell-role="th">parking_lot_pct</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">market_scale</th>
<th data-quarto-table-cell-role="th">level</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="9" data-quarto-table-cell-role="th" data-valign="top">상설</td>
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">large</td>
<td data-quarto-table-cell-role="th">high</td>
<td>175</td>
<td>159</td>
<td>175</td>
<td>175</td>
<td>90.9</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>84</td>
<td>76</td>
<td>84</td>
<td>0</td>
<td>90.5</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">low</td>
<td>22</td>
<td>21</td>
<td>0</td>
<td>7</td>
<td>95.5</td>
<td>0.0</td>
<td>31.8</td>
</tr>
<tr class="even">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">medium</td>
<td data-quarto-table-cell-role="th">high</td>
<td>231</td>
<td>205</td>
<td>231</td>
<td>231</td>
<td>88.7</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>213</td>
<td>180</td>
<td>213</td>
<td>0</td>
<td>84.5</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">low</td>
<td>88</td>
<td>74</td>
<td>0</td>
<td>16</td>
<td>84.1</td>
<td>0.0</td>
<td>18.2</td>
</tr>
<tr class="odd">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">small</td>
<td data-quarto-table-cell-role="th">high</td>
<td>100</td>
<td>68</td>
<td>100</td>
<td>100</td>
<td>68.0</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>80</td>
<td>51</td>
<td>80</td>
<td>0</td>
<td>63.7</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">low</td>
<td>9</td>
<td>8</td>
<td>0</td>
<td>3</td>
<td>88.9</td>
<td>0.0</td>
<td>33.3</td>
</tr>
<tr class="even">
<td rowspan="8" data-quarto-table-cell-role="th" data-valign="top">상설+정기</td>
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">large</td>
<td data-quarto-table-cell-role="th">high</td>
<td>53</td>
<td>51</td>
<td>53</td>
<td>53</td>
<td>96.2</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>10</td>
<td>10</td>
<td>10</td>
<td>0</td>
<td>100.0</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">low</td>
<td>3</td>
<td>3</td>
<td>0</td>
<td>0</td>
<td>100.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">medium</td>
<td data-quarto-table-cell-role="th">high</td>
<td>99</td>
<td>92</td>
<td>99</td>
<td>99</td>
<td>92.9</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>39</td>
<td>33</td>
<td>39</td>
<td>0</td>
<td>84.6</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">low</td>
<td>7</td>
<td>7</td>
<td>0</td>
<td>2</td>
<td>100.0</td>
<td>0.0</td>
<td>28.6</td>
</tr>
<tr class="even">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">small</td>
<td data-quarto-table-cell-role="th">high</td>
<td>40</td>
<td>28</td>
<td>40</td>
<td>40</td>
<td>70.0</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>8</td>
<td>5</td>
<td>8</td>
<td>0</td>
<td>62.5</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td rowspan="7" data-quarto-table-cell-role="th" data-valign="top">정기</td>
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">large</td>
<td data-quarto-table-cell-role="th">high</td>
<td>13</td>
<td>12</td>
<td>13</td>
<td>13</td>
<td>92.3</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>0</td>
<td>100.0</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">medium</td>
<td data-quarto-table-cell-role="th">high</td>
<td>36</td>
<td>28</td>
<td>36</td>
<td>36</td>
<td>77.8</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>10</td>
<td>4</td>
<td>10</td>
<td>0</td>
<td>40.0</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">small</td>
<td data-quarto-table-cell-role="th">high</td>
<td>83</td>
<td>34</td>
<td>83</td>
<td>83</td>
<td>41.0</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>32</td>
<td>8</td>
<td>32</td>
<td>0</td>
<td>25.0</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">low</td>
<td>2</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0.0</td>
<td>0.0</td>
<td>50.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>비율만 뽑아서 봐보기</p>
<div id="6317422c" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>group_df.iloc[:,[<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">market_count</th>
<th data-quarto-table-cell-role="th">certificate_pct</th>
<th data-quarto-table-cell-role="th">public_toilet_pct</th>
<th data-quarto-table-cell-role="th">parking_lot_pct</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">market_scale</th>
<th data-quarto-table-cell-role="th">level</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="9" data-quarto-table-cell-role="th" data-valign="top">상설</td>
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">large</td>
<td data-quarto-table-cell-role="th">high</td>
<td>175</td>
<td>90.9</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>84</td>
<td>90.5</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">low</td>
<td>22</td>
<td>95.5</td>
<td>0.0</td>
<td>31.8</td>
</tr>
<tr class="even">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">medium</td>
<td data-quarto-table-cell-role="th">high</td>
<td>231</td>
<td>88.7</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>213</td>
<td>84.5</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">low</td>
<td>88</td>
<td>84.1</td>
<td>0.0</td>
<td>18.2</td>
</tr>
<tr class="odd">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">small</td>
<td data-quarto-table-cell-role="th">high</td>
<td>100</td>
<td>68.0</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>80</td>
<td>63.7</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">low</td>
<td>9</td>
<td>88.9</td>
<td>0.0</td>
<td>33.3</td>
</tr>
<tr class="even">
<td rowspan="8" data-quarto-table-cell-role="th" data-valign="top">상설+정기</td>
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">large</td>
<td data-quarto-table-cell-role="th">high</td>
<td>53</td>
<td>96.2</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>10</td>
<td>100.0</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">low</td>
<td>3</td>
<td>100.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">medium</td>
<td data-quarto-table-cell-role="th">high</td>
<td>99</td>
<td>92.9</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>39</td>
<td>84.6</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">low</td>
<td>7</td>
<td>100.0</td>
<td>0.0</td>
<td>28.6</td>
</tr>
<tr class="even">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">small</td>
<td data-quarto-table-cell-role="th">high</td>
<td>40</td>
<td>70.0</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>8</td>
<td>62.5</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td rowspan="7" data-quarto-table-cell-role="th" data-valign="top">정기</td>
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">large</td>
<td data-quarto-table-cell-role="th">high</td>
<td>13</td>
<td>92.3</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>2</td>
<td>100.0</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">medium</td>
<td data-quarto-table-cell-role="th">high</td>
<td>36</td>
<td>77.8</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>10</td>
<td>40.0</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td rowspan="3" data-quarto-table-cell-role="th" data-valign="top">small</td>
<td data-quarto-table-cell-role="th">high</td>
<td>83</td>
<td>41.0</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">intermediate</td>
<td>32</td>
<td>25.0</td>
<td>100.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">low</td>
<td>2</td>
<td>0.0</td>
<td>0.0</td>
<td>50.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="상설정기-시장의-지역-봐보기" class="level2">
<h2 class="anchored" data-anchor-id="상설정기-시장의-지역-봐보기">상설+정기 시장의 지역 봐보기</h2>
<div id="9c3667e3" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>market2.query(<span class="st">'type == "상설+정기"'</span>).head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">market_name</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">address_new</th>
<th data-quarto-table-cell-role="th">open_period</th>
<th data-quarto-table-cell-role="th">address_old</th>
<th data-quarto-table-cell-role="th">market_count</th>
<th data-quarto-table-cell-role="th">certificate</th>
<th data-quarto-table-cell-role="th">public_toilet</th>
<th data-quarto-table-cell-role="th">parking_lot</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">data_date</th>
<th data-quarto-table-cell-role="th">market_scale</th>
<th data-quarto-table-cell-role="th">level</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>주문진종합시장</td>
<td>상설+정기</td>
<td>강원도 강릉시 주문진읍 구 시장길</td>
<td>5일</td>
<td>강원 강릉시 주문진읍 주문리 321-52번지</td>
<td>77</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2006.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>high</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>간성시장</td>
<td>상설+정기</td>
<td>강원도 고성군 간성시장 2길 11-1</td>
<td>5일</td>
<td>강원 고성군 간성읍 신안리 262번지</td>
<td>89</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2003.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>high</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>거진시장</td>
<td>상설+정기</td>
<td>강원도 고성군 거진읍 거진시장길 15</td>
<td>5일</td>
<td>강원 고성군 거진읍 거진리 272번지</td>
<td>51</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2010.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>high</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>북평민속시장</td>
<td>상설+정기</td>
<td>강원도 동해시 북평 오일장길 32</td>
<td>5일</td>
<td>강원 동해시 구미동 497-11번지 일원</td>
<td>130</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2013.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>high</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>삼척중앙시장</td>
<td>상설+정기</td>
<td>강원도 삼척시 진주로 12-21</td>
<td>5일</td>
<td>강원 삼척시 남양동 55-4</td>
<td>299</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2014.0</td>
<td>2015-12-31</td>
<td>large</td>
<td>high</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="시도-변수-만들기" class="level2">
<h2 class="anchored" data-anchor-id="시도-변수-만들기">시/도 변수 만들기</h2>
<div id="b109eeb2" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>first_tokens <span class="op">=</span> []</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>i<span class="op">=</span><span class="dv">0</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for loop을 사용하여 각 행의 첫 음절 추출</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> address <span class="kw">in</span> market2[<span class="st">'address_old'</span>]:</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    first_token <span class="op">=</span> market2[<span class="st">'address_old'</span>][i].split()[<span class="dv">0</span>] <span class="op">+</span><span class="st">' '</span> <span class="op">+</span> market2[<span class="st">'address_old'</span>][i].split()[<span class="dv">1</span>] <span class="co"># 띄어쓰기를 기준으로 나눈 후 첫 번째 토큰을 추출</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    first_tokens.append(first_token)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 추출한 첫 음절을 새로운 컬럼으로 추가</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'town_city'</span>] <span class="op">=</span> first_tokens</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>market2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">market_name</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">address_new</th>
<th data-quarto-table-cell-role="th">open_period</th>
<th data-quarto-table-cell-role="th">address_old</th>
<th data-quarto-table-cell-role="th">market_count</th>
<th data-quarto-table-cell-role="th">certificate</th>
<th data-quarto-table-cell-role="th">public_toilet</th>
<th data-quarto-table-cell-role="th">parking_lot</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">data_date</th>
<th data-quarto-table-cell-role="th">market_scale</th>
<th data-quarto-table-cell-role="th">level</th>
<th data-quarto-table-cell-role="th">town_city</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>중앙시장</td>
<td>상설</td>
<td>강원도 강릉시 금성로 21</td>
<td>상설</td>
<td>강원 강릉시 성남동 50번지</td>
<td>229</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1980.0</td>
<td>2015-12-31</td>
<td>large</td>
<td>high</td>
<td>강원 강릉시</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>강릉동부시장</td>
<td>상설</td>
<td>강원도 강릉시 옥천로 48</td>
<td>상설</td>
<td>강원 강릉시 옥천동 223번지</td>
<td>91</td>
<td>NaN</td>
<td>Y</td>
<td>N</td>
<td>2014.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>intermediate</td>
<td>강원 강릉시</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>강릉서부시장</td>
<td>상설</td>
<td>강원도 강릉시 임영로 155번길 6</td>
<td>상설</td>
<td>강원 강릉시 용강동 29번지</td>
<td>109</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>1977.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>high</td>
<td>강원 강릉시</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>주문진종합시장</td>
<td>상설+정기</td>
<td>강원도 강릉시 주문진읍 구 시장길</td>
<td>5일</td>
<td>강원 강릉시 주문진읍 주문리 321-52번지</td>
<td>77</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2006.0</td>
<td>2015-12-31</td>
<td>medium</td>
<td>high</td>
<td>강원 강릉시</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>주문진수산시장</td>
<td>상설</td>
<td>강원도 강릉시 주문진읍 시장1길 4-1</td>
<td>상설</td>
<td>강원 강릉시 주문진읍 주문리 312-91번지</td>
<td>42</td>
<td>온누리상품권</td>
<td>Y</td>
<td>Y</td>
<td>2007.0</td>
<td>2015-12-31</td>
<td>small</td>
<td>high</td>
<td>강원 강릉시</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="지역별로-시장-수-알아보기" class="level2">
<h2 class="anchored" data-anchor-id="지역별로-시장-수-알아보기">지역별로 시장 수 알아보기</h2>
<div id="68dea563" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'display.max_rows'</span>, <span class="va">None</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>market2[<span class="st">'town_city'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>town_city
경남 창원시     59
경북 포항시     34
부산 부산진구    26
대구 달서구     23
경기 성남시     22
서울 중구      21
대구 북구      20
부산 수영구     19
경기 수원시     19
경기 부천시     19
서울 동대문구    18
제주 제주시     17
대구 중구      16
울산 중구      16
경북 구미시     16
부산 중구      15
대구 동구      15
경북 경주시     15
부산 사하구     15
전남 여수시     15
부산 사상구     14
경남 진주시     13
대전 동구      13
대구 남구      13
충북 청주시     13
서울 관악구     13
부산 동래구     12
충북 충주시     12
경북 영주시     12
부산 남구      11
전북 익산시     11
부산 해운대구    11
서울 중랑구     11
서울 영등포구    11
서울 강북구     11
서울 강서구     11
서울 마포구     10
경남 거제시     10
대구 서구      10
서울 강동구     10
서울 광진구     10
울산 남구       9
인천 남구       9
부산 서구       9
서울 성북구      9
서울 양천구      9
서울 동작구      9
경기 안양시      9
경북 안동시      9
서울 은평구      9
대구 수성구      9
경남 하동군      8
광주 서구       8
울산 울주군      8
서울 종로구      8
서울 서대문구     8
부산 금정구      8
전남 보성군      8
충남 금산군      8
부산 동구       8
전북 군산시      8
강원 춘천시      8
제주 서귀포시     8
인천 부평구      7
인천 동구       7
부산 연제구      7
대전 중구       7
서울 용산구      7
경남 사천시      7
강원 강릉시      7
강원 원주시      7
경북 의성군      7
경남 양산시      7
충북 제천시      7
전남 목포시      7
전남 순천시      7
충남 천안시      7
충남 예산군      7
인천 서구       6
전남 고흥군      6
전남 나주시      6
서울 송파구      6
경기 파주시      6
전남 해남군      6
전남 광양시      6
전북 고창군      6
울산 동구       6
부산 북구       6
인천 남동구      6
경북 예천군      6
경북 울진군      6
경남 김해시      6
경북 상주시      6
광주 북구       6
광주 광산구      6
경남 밀양시      6
경북 청송군      5
경기 평택시      5
전남 장흥군      5
전남 영암군      5
서울 구로구      5
전북 전주시      5
충북 음성군      5
충북 보은군      5
충남 보령시      5
충남 논산시      5
전남 화순군      5
경북 문경시      5
경남 합천군      5
경남 함양군      5
경남 산청군      5
서울 강남구      5
경남 창녕군      5
충북 괴산군      4
대전 대덕구      4
서울 성동구      4
충남 홍성군      4
충남 서산시      4
전남 완도군      4
전북 김제시      4
강원 정선군      4
경남 남해군      4
경남 고성군      4
경기 화성시      4
충북 단양군      4
전남 함평군      4
전북 임실군      4
전북 무주군      4
서울 도봉구      4
세종 세종시      4
경남 함안군      4
경북 군위군      4
경북 영덕군      4
경북 청도군      4
광주 동구       4
경기 동두천시     4
경기 김포시      4
강원 삼척시      4
강원 철원군      4
경기 시흥시      4
강원 평창군      4
경기 고양시      4
강원 영월군      3
경기 안성시      3
경기 양평군      3
강원 동해시      3
전북 장수군      3
경남 통영시      3
경북 영천시      3
경기 의정부시     3
경북 경산시      3
대구 달성군      3
전남 진도군      3
충남 태안군      3
인천 강화군      3
부산 진구       3
부산 영도구      3
서울 금천구      3
인천 계양구      3
인천 중구       3
충남 공주시      3
전북 순창군      3
전남 영광군      3
전북 정읍시      3
충남 부여군      3
충남 당진시      3
전남 무안군      3
전남 장성군      3
전북 남원시      3
전북 완주군      3
전남 강진군      3
전남 구례군      3
전남 곡성군      3
강원 고성군      2
대전 서구       2
인천 연수구      2
서울 서초구      2
경북 칠곡군      2
경기 용인시      2
경기 광명시      2
경기 과천시      2
경기 군포시      2
강원 인제군      2
강원 속초시      2
강원 홍천군      2
강원 태백시      2
경기 포천시      2
경기 하남시      2
경남 의령군      2
광주 남구       2
경북 성주군      2
경북 봉화군      2
경북 김천시      2
경기 이천시      2
충북 진천군      2
충남 아산시      2
충북 영동군      2
충남 청양군      2
충북 청원군      2
전북 부안군      2
전남 담양군      2
충남 서천군      2
충북 옥천군      2
서울 노원구      2
강원 양구군      1
강원 화천군      1
경기 광주시      1
경기 구리시      1
경기 가평군      1
강원 양양군      1
경북 고령군      1
경북 영양군      1
경기 여주시      1
경남 거창군      1
경기 오산시      1
경기 연천군      1
경기 의왕시      1
경기 안산시      1
강원 횡성군      1
부산 강서구      1
대전 유성구      1
부산 기장군      1
울산 북구       1
전남 신안군      1
전북 진안군      1
충북 증평군      1
Name: count, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="관광형-상설정기-시장이-있는-지역-알아보기" class="level2">
<h2 class="anchored" data-anchor-id="관광형-상설정기-시장이-있는-지역-알아보기">관광형 상설+정기 시장이 있는 지역 알아보기</h2>
<div id="f49b9e5b" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>market4 <span class="op">=</span> market2.query(<span class="st">'type == "상설+정기"'</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>market4[<span class="st">'town_city'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>town_city
경북 경주시     7
경북 울진군     6
경남 창원시     5
전북 익산시     5
충북 보은군     5
충북 음성군     5
경남 하동군     4
경기 파주시     4
경기 평택시     4
경북 안동시     4
강원 철원군     4
세종 세종시     4
울산 울주군     4
경북 포항시     4
충남 금산군     4
충남 천안시     4
충북 괴산군     4
충남 보령시     4
충남 논산시     4
강원 평창군     4
경기 화성시     4
전남 고흥군     4
경북 영덕군     3
경북 경산시     3
경북 구미시     3
경기 안성시     3
강원 정선군     3
경북 영천시     3
경북 예천군     3
경북 청송군     3
경남 합천군     3
충남 당진시     3
충북 제천시     3
충북 충주시     3
전북 무주군     3
충남 홍성군     3
충북 단양군     3
전북 정읍시     2
충남 공주시     2
전남 무안군     2
전북 김제시     2
전남 장흥군     2
전북 완주군     2
경남 의령군     2
경남 사천시     2
경북 군위군     2
경북 문경시     2
경남 창녕군     2
경남 밀양시     2
경남 양산시     2
경남 김해시     2
경남 남해군     2
강원 인제군     2
강원 원주시     2
강원 고성군     2
강원 홍천군     2
경북 김천시     2
경북 봉화군     2
경북 상주시     2
충남 청양군     2
충북 영동군     2
충북 청원군     2
충남 예산군     2
충남 서천군     2
대구 달성군     2
대구 북구      2
전북 남원시     2
울산 중구      2
경기 성남시     1
경기 안산시     1
경기 양평군     1
경기 하남시     1
경남 고성군     1
경남 산청군     1
경남 진주시     1
강원 춘천시     1
강원 삼척시     1
강원 양구군     1
강원 화천군     1
경기 가평군     1
경기 고양시     1
경기 광주시     1
강원 횡성군     1
경기 동두천시    1
경기 오산시     1
경기 용인시     1
경기 이천시     1
경기 여주시     1
강원 양양군     1
강원 동해시     1
강원 강릉시     1
경북 영양군     1
경북 성주군     1
경남 함양군     1
경남 함안군     1
경남 거창군     1
울산 북구      1
전남 나주시     1
경북 영주시     1
광주 북구      1
경북 칠곡군     1
대구 동구      1
대구 중구      1
대전 대덕구     1
부산 북구      1
부산 사하구     1
서울 은평구     1
전북 고창군     1
전남 순천시     1
전남 여수시     1
전남 영광군     1
전남 강진군     1
전북 임실군     1
전북 장수군     1
전북 진안군     1
충남 아산시     1
충남 서산시     1
충남 부여군     1
충남 태안군     1
충북 증평군     1
충북 옥천군     1
충북 진천군     1
충북 청주시     1
Name: count, dtype: int64</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>