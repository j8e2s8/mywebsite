---
title: "project1"
author: "장일준, 이태현, 정은서, 정아영"
format: html
editor: visual
jupyter: python3
---

# 소상공인시장진흥공단_전국 전통시장 현황_2015

```{python}
import pandas as pd
import numpy as np

market = pd.read_excel("traditionalmarket.xlsx")
market2 = market.copy()
market2.head()
```

## 변수명 바꾸기

```{python}
market2 = market2.rename(columns={'시장명' : 'market_name',
                              '시장유형' : 'type',
                              '소재지도로명주소' : 'address_new',
                              '시장개설주기' : 'open_period',
                              '소재지지번주소' : 'address_old',
                              '점포수' : 'market_count',
                              '사용가능상품권' : 'certificate',
                              '공중화장실 보유여부' : 'public_toilet',
                              '주차장 보유여부' : 'parking_lot',
                              '개설년도' : 'year' ,
                              '데이터기준일자' : 'data_date'})
market2.head()
```

잘 바뀐 것을 알 수 있다.

## 데이터 정보 알아보기

```{python}
market2.info()
```

8개가 범주컬럼이고, 2개가 수치 컬럼, 1개가 날짜컬럼임을 알 수 있다. (수치컬럼중 1개는 연도컬럼이라서, 우리가 분석해 볼 수 있는 수치 컬럼은 1개뿐이다.) 그리고 사용가능상품권(certificate)와 개설연도(year)에만 null값이 있다는 것을 알 수 있다.

## 정포수 요약 정보 알아보기

```{python}
market2[['market_count']].describe()
```

점포수 위주로 봤을 때, 25%, 75% 기준으로 점포 사이즈를 나누는 것이 합리적으로 보인다. samll : 50개 미만 medium : 50개 이상 134개 미만 large : 134개 이상 3가지의 범주로 나누고자 한다.

## 점포수로 범주화하기

```{python}
market2 = market2.assign(market_scale = np.where(market2["market_count"] >= 134, "large", 
                                        np.where(market2["market_count"] >= 50, "medium", "small")))
market2.head()
```

점포수대로 범주화가 잘 되어진 것으로 보인다.

```{python}
import matplotlib.pyplot as plt
plt.clf()
market2['market_scale'].value_counts().plot.bar(rot=0)
plt.show()
```

## 편의시절(공중화장실, 주차장) 보유 여부에 따라 시장을 범주화하기.

```{python}

market2['level'] = np.where((market2['public_toilet'] == 'Y') & (market2['parking_lot'] == 'Y'), 'high', 
                   np.where((market2['public_toilet'] == 'N') & (market2['public_toilet'] == 'N') , 'low', 'intermediate'))
market2.head()
```

편의시절(공중화장실, 주차장) 보유 여부에 따라 시장의 편의성이 얼마나 좋은지 범주화 해보고자 한다.

(공중화장실 Y, 주차장 Y) -\> high (공중화장실 Y, 주차장 N) -\> intermediate (공중화장실 N, 주차장 Y) -\> intermediate (공중화장실 N, 주차장 N) -\> low

```{python}
import matplotlib.pyplot as plt
plt.clf()
market2['level'].value_counts().plot.bar(rot=0)
plt.show()
```

대다수의 시장이 편의시설이 잘 구비되어 있음을 알 수 있다.

## 

```{python}
plt.clf()
df = market2.groupby(["type", "market_scale"], as_index = False) \
            .agg(market_count = ("market_scale", "count"))
df.sort_values('market_count', ascending = False)
plt.show()
```
